<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Gabriela CRM</title>
    <link rel="stylesheet" href="src/assets/styles.css">
</head>
<body>
    <div class="container" style="padding-top: 40px;">
        <h1 class="mb-lg">üß™ P√°gina de Testes</h1>

        <div class="card mb-md">
            <h2>Status do Sistema</h2>
            <div id="system-status"></div>
        </div>

        <div class="card mb-md">
            <h2>A√ß√µes R√°pidas</h2>
            <div class="flex gap-sm" style="flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="loadSampleData()">
                    Carregar Dados de Exemplo
                </button>
                <button class="btn btn-secondary" onclick="clearAllData()">
                    Limpar Todos os Dados
                </button>
                <button class="btn btn-outline" onclick="checkSystem()">
                    Verificar Sistema
                </button>
                <button class="btn btn-outline" onclick="exportData()">
                    Exportar Dados
                </button>
            </div>
        </div>

        <div class="card mb-md">
            <h2>Navega√ß√£o</h2>
            <div class="flex gap-sm" style="flex-wrap: wrap;">
                <a href="/" class="btn btn-outline">Landing Page</a>
                <a href="/dashboard" class="btn btn-outline">Dashboard</a>
                <a href="/clientes" class="btn btn-outline">Clientes</a>
                <a href="/agenda" class="btn btn-outline">Agenda</a>
                <a href="/financeiro" class="btn btn-outline">Financeiro</a>
            </div>
        </div>

        <div class="card">
            <h2>Logs</h2>
            <div id="logs" style="background: #f5f5f5; padding: 16px; border-radius: 8px; font-family: monospace; font-size: 0.9rem; max-height: 300px; overflow-y: auto;">
                Nenhum log ainda...
            </div>
        </div>
    </div>

    <script src="src/utils/sample-data.js"></script>
    <script>
        function log(message, type = 'info') {
            const logsDiv = document.getElementById('logs');
            const timestamp = new Date().toLocaleTimeString('pt-BR');
            const colors = {
                info: '#3498DB',
                success: '#5EAC7B',
                error: '#E74C3C',
                warning: '#F5A623'
            };
            
            if (logsDiv.textContent === 'Nenhum log ainda...') {
                logsDiv.textContent = '';
            }
            
            const logEntry = document.createElement('div');
            logEntry.style.color = colors[type];
            logEntry.textContent = `[${timestamp}] ${message}`;
            logsDiv.appendChild(logEntry);
            logsDiv.scrollTop = logsDiv.scrollHeight;
        }

        function checkSystem() {
            log('Iniciando verifica√ß√£o do sistema...', 'info');
            
            // Verificar LocalStorage
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                log('‚úÖ LocalStorage: OK', 'success');
            } catch (e) {
                log('‚ùå LocalStorage: ERRO - ' + e.message, 'error');
            }

            // Verificar dados
            const clientes = JSON.parse(localStorage.getItem('gabriela_clientes') || '[]');
            const agendamentos = JSON.parse(localStorage.getItem('gabriela_agendamentos') || '[]');
            const pagamentos = JSON.parse(localStorage.getItem('gabriela_pagamentos') || '[]');

            log(`üìä Clientes cadastrados: ${clientes.length}`, 'info');
            log(`üìÖ Agendamentos: ${agendamentos.length}`, 'info');
            log(`üí∞ Pagamentos: ${pagamentos.length}`, 'info');

            updateSystemStatus();
            log('Verifica√ß√£o conclu√≠da!', 'success');
        }

        function updateSystemStatus() {
            const statusDiv = document.getElementById('system-status');
            const clientes = JSON.parse(localStorage.getItem('gabriela_clientes') || '[]');
            const agendamentos = JSON.parse(localStorage.getItem('gabriela_agendamentos') || '[]');
            const pagamentos = JSON.parse(localStorage.getItem('gabriela_pagamentos') || '[]');

            statusDiv.innerHTML = `
                <div class="stats-grid" style="grid-template-columns: repeat(3, 1fr);">
                    <div style="text-align: center; padding: 20px; background: var(--background); border-radius: 8px;">
                        <div style="font-size: 2rem; font-weight: 700; color: var(--primary);">${clientes.length}</div>
                        <div>Clientes</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: var(--background); border-radius: 8px;">
                        <div style="font-size: 2rem; font-weight: 700; color: var(--success);">${agendamentos.length}</div>
                        <div>Agendamentos</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: var(--background); border-radius: 8px;">
                        <div style="font-size: 2rem; font-weight: 700; color: var(--info);">${pagamentos.length}</div>
                        <div>Pagamentos</div>
                    </div>
                </div>
            `;
        }

        function exportData() {
            log('Exportando dados...', 'info');
            
            const data = {
                clientes: JSON.parse(localStorage.getItem('gabriela_clientes') || '[]'),
                agendamentos: JSON.parse(localStorage.getItem('gabriela_agendamentos') || '[]'),
                pagamentos: JSON.parse(localStorage.getItem('gabriela_pagamentos') || '[]'),
                config: JSON.parse(localStorage.getItem('gabriela_config') || '{}')
            };

            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `gabriela-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            
            log('‚úÖ Dados exportados com sucesso!', 'success');
        }

        // Verificar ao carregar
        window.addEventListener('DOMContentLoaded', () => {
            log('Sistema de testes carregado', 'success');
            updateSystemStatus();
        });
    </script>
</body>
</html>
